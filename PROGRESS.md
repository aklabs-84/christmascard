# 🎄 Christmas Tree Card - 진행 상황

## ✅ 완료된 작업

### Phase 1-3: 기본 구조 및 데이터 연동
- ✅ HTML, CSS, JavaScript 파일 분리
- ✅ Google Apps Script 통합 (app-v2.js)
- ✅ 크리스마스 트리 SVG 렌더링
- ✅ 눈 내리기 애니메이션 (속도 최적화 완료)
- ✅ 반짝이는 별 애니메이션
- ✅ 폰트 변경 (Jua, Sunflower)
- ✅ 입력 필드 색상 수정
- ✅ 트리 상단 별 잘림 현상 수정
- ✅ 눈송이 초기 분산 배치
- ✅ config.js를 .gitignore에 추가

### Phase 4: 카드 편집기 기본 기능 ✨ NEW
- ✅ 텍스트 박스 추가 기능
  - 드래그 앤 드롭으로 위치 이동
  - 직접 텍스트 편집 가능
  - 클릭하여 선택
  - 선택 시 골드 테두리 표시

- ✅ 이미지 추가 기능
  - 파일 업로드
  - 자동 이미지 압축 (browser-image-compression 사용)
  - WebP 형식 변환
  - 드래그 앤 드롭으로 위치 이동
  - 클릭하여 선택

- ✅ 카드 저장 기능
  - 모든 텍스트와 이미지 요소 수집
  - Google Sheets에 JSON 형식으로 저장
  - 위치 정보 저장

- ✅ 카드 상세 보기
  - 텍스트와 이미지를 원래 위치에 렌더링
  - URL 카드 지원
  - 작성자 이름 표시

- ✅ CSS 스타일링
  - 카드 요소용 스타일 추가
  - 호버 효과
  - 선택 효과

### Phase 5: 텍스트 편집 기능 ✨ NEW
- ✅ 텍스트 속성 편집 패널
  - 폰트 변경 (5종: Jua, Nanum Pen Script, Cute Font, Gamja Flower, Sunflower)
  - 글꼴 크기 조절 (12px ~ 72px, 슬라이더)
  - 색상 선택 (컬러 피커)
  - 텍스트 정렬 (좌, 중, 우)
  - 애니메이션 효과 선택 (페이드 인, 타이핑, 반짝임, 슬라이드, 튀어오르기)
- ✅ 요소 선택 시 속성 패널 자동 표시
- ✅ 실시간 속성 변경 미리보기
- ✅ Delete/Backspace 키로 선택된 요소 삭제
- ✅ 삭제 버튼으로 요소 삭제

### Phase 6: 이미지 편집 기능 ✨ NEW
- ✅ 이미지 속성 편집 패널
  - 크기 조절 (50px ~ 400px, 슬라이더)
  - 회전 (0°, 90°, 180°, 270°)
- ✅ 요소 선택 시 속성 패널 자동 표시
- ✅ 실시간 속성 변경 미리보기
- ✅ 이미지 삭제 기능

## 🔨 구현 중/다음 단계

### Phase 7: 카드 애니메이션 및 오디오
- ⏳ 배경 색상/그라데이션 선택
- ⏳ 카드 배경 애니메이션 선택
  - 눈 내리기
  - 반짝이는 별
  - 떨어지는 눈송이
  - 반짝이는 조명
  - 회전하는 눈꽃
- ⏳ 배경 음악 업로드
- ⏳ 효과음 추가
- ⏳ 볼륨 조절

### Phase 8: 카드 관리 기능
- ⏳ 카드 수정 기능 (비밀번호 인증)
- ⏳ 카드 삭제 기능 (비밀번호 인증)
- ⏳ 내 카드 검색 기능
- ⏳ 카드 공유 URL 생성

### Phase 9: 고급 기능
- ⏳ 오브제 드래그 앤 드롭으로 위치 변경 후 저장
- ⏳ 카드 저장 시 트리로 날아가는 애니메이션
- ⏳ URL 파라미터로 특정 카드 직접 열기 (?card=카드ID)
- ⏳ 반응형 디자인 최적화

## 📝 사용 방법

### 1. Google Apps Script 설정

**중요**: 이 프로젝트는 Google Sheets API가 아닌 **Google Apps Script 웹 앱** 방식을 사용합니다.

#### Apps Script 배포 단계:
1. **Google Sheets 새 스프레드시트 생성**
   - 이름: 원하는 이름 (예: "Christmas Tree Cards")

2. **Apps Script 열기**
   - 확장 프로그램 > Apps Script 클릭

3. **코드 붙여넣기**
   - `google-apps-script.js` 전체 내용을 복사하여 붙여넣기
   - 기본 `Code.gs`의 내용을 모두 지우고 붙여넣기

4. **웹 앱으로 배포**
   - 배포 > 새 배포
   - 유형 선택: "웹 앱"
   - 실행 권한: **나**
   - 액세스 권한: **모든 사용자**
   - 배포 클릭

5. **배포 URL 복사**
   - 형식: `https://script.google.com/macros/s/YOUR_DEPLOYMENT_ID/exec`

#### 작동 원리:
- `SpreadsheetApp.getActiveSpreadsheet()` 사용
- SPREADSHEET_ID 불필요 (자동으로 연결됨)
- "Cards" 시트 자동 생성 (첫 실행 시)
- 헤더 자동 추가
- **CORS 헤더 자동 포함** - 크로스 도메인 요청 지원
- `doOptions()` 핸들러로 CORS preflight 요청 처리

### 2. 설정 파일 생성
```bash
cp config.example.js config.js
```

`config.js`를 열고 배포 URL 입력:
```javascript
const CONFIG = {
    GOOGLE_SHEETS: {
        SCRIPT_URL: 'https://script.google.com/macros/s/YOUR_DEPLOYMENT_ID/exec'
    },
    // ...
};
```

### 3. 로컬 웹 서버 실행 (CORS 오류 방지)

**중요**: `file://` 프로토콜로 직접 열면 CORS 오류가 발생합니다!

```bash
# Python 사용
python3 -m http.server 8000

# 또는 Node.js 사용
npx http-server

# 또는 VS Code Live Server 확장 사용
```

브라우저에서 `http://localhost:8000` 접속

### 4. 첫 실행
- 첫 카드 저장 시 "Cards" 시트가 자동 생성됩니다
- 헤더도 자동으로 추가됩니다
- 아무것도 수동으로 생성할 필요 없습니다!

## 🎨 현재 사용 가능한 기능

1. **카드 만들기**
   - 작성자 이름 입력
   - 비밀번호 설정
   - 오브제 선택 (7종)
   - 카드 유형 선택 (일반 카드 / URL 카드)
   - **텍스트 박스 추가 및 편집**
     - 드래그 앤 드롭으로 위치 이동
     - 폰트 변경 (5종)
     - 글꼴 크기 조절 (12px ~ 72px)
     - 색상 선택
     - 텍스트 정렬 (좌, 중, 우)
     - 애니메이션 효과 (6종)
   - **이미지 업로드 및 편집**
     - 자동 압축 및 WebP 변환
     - 드래그 앤 드롭으로 위치 이동
     - 크기 조절 (50px ~ 400px)
     - 회전 (0°, 90°, 180°, 270°)
   - **요소 관리**
     - 클릭하여 요소 선택
     - Delete/Backspace 키로 삭제
     - 삭제 버튼으로 삭제
   - 저장하기

2. **트리 보기**
   - 크리스마스 트리에 오브제 표시
   - 오브제 클릭하여 카드 보기
   - 눈 내리기 애니메이션
   - 반짝이는 별 효과
   - 자동 배치 기능

3. **카드 상세 보기**
   - 텍스트와 이미지 렌더링
   - 텍스트 속성 반영 (폰트, 색상, 정렬, 애니메이션)
   - 이미지 회전 반영
   - URL 카드 지원

## 🐛 알려진 이슈

- 카드 수정/삭제 기능 미구현 (비밀번호 인증 필요)
- 배경 색상/애니메이션 선택 미구현
- 배경 음악 및 효과음 기능 미구현

## 📚 다음 업데이트 예정

다음 단계에서는 **Phase 7: 카드 애니메이션 및 오디오**를 구현할 예정입니다:
- 배경 색상/그라데이션 선택 기능
- 카드 배경 애니메이션 선택 (눈 내리기, 반짝이는 별, 떨어지는 눈송이 등)
- 배경 음악 업로드 및 재생
- 효과음 추가
- 볼륨 조절 기능
